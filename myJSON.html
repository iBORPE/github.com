<!DOCTYPE html>
<html>

<head>
    <script>
        var data = [{
                "name": "Import danych do bazy danych",
                "start_time": "2019-05-08",
                "end_time": "2019-05-10",
                "status": "new",
                "parent_id": 34,
                "id": 36,
                "assignee": "Bartłomiej Nowak"
            },
            {
                "name": "Utworzenie modeli bazy danych",
                "start_time": "2019-05-07",
                "end_time": "2019-05-08",
                "status": "new",
                "parent_id": 34,
                "id": 35,
                "assignee": "Justyna Malik"
            },
            {
                "name": "Utworzenie repozytorium git",
                "start_time": "2019-05-06",
                "end_time": "2019-05-06",
                "status": "new",
                "parent_id": 29,
                "id": 33,
                "assignee": "Justyna Malik"
            },
            {
                "name": "Sortowanie bąbelkowe",
                "start_time": "2019-05-01",
                "end_time": "2019-05-02",
                "status": "completed",
                "parent_id": 10,
                "id": 11,
                "assignee": "Jan Kowalski"
            },
            {
                "name": "Sortowanie przez scalanie",
                "start_time": "2019-05-02",
                "end_time": "2019-05-03",
                "status": "pending",
                "parent_id": 10,
                "id": 12,
                "assignee": "Jan Kowalski"
            },

            {
                "name": "Sortowanie mergsort",
                "start_time": "2019-05-04",
                "end_time": "2019-05-05",
                "status": "new",
                "parent_id": 10,
                "id": 14,
                "assignee": "Bartłomiej Nowak"
            },
            {
                "name": "Migracja systemu zadań",
                "start_time": "2019-05-06",
                "end_time": "2019-05-24",
                "status": "new",
                "parent_id": "",
                "id": 29,
                "assignee": "Jan Kowalski"
            },
            {
                "name": "Wyświetlanie zadań na osi czasu",
                "start_time": "2019-05-07",
                "end_time": "2019-05-10",
                "status": "new",
                "parent_id": "29",
                "id": 32,
                "assignee": "Bartłomiej Nowak"
            },
            {
                "name": "Sortowanie zadań wg. czasu wykonania",
                "start_time": "2019-05-06",
                "end_time": "2019-05-07",
                "status": "new",
                "parent_id": 29,
                "id": 31,
                "assignee": "Bartłomiej Nowak"
            },
            {
                "name": "Utowrzenie endpointów dla aplikacji web",
                "start_time": "2019-05-10",
                "end_time": "2019-05-10",
                "status": "new",
                "parent_id": 34,
                "id": 37,
                "assignee": "Justyna Malik"
            },
            {
                "name": "Sortowanie quicksort",
                "start_time": "2019-05-03",
                "end_time": "2019-05-04",
                "status": "new",
                "parent_id": 10,
                "id": 13,
                "assignee": "Bartłomiej Nowak"
            },
            {
                "name": "Integracja z Django",
                "start_time": "2019-05-07",
                "end_time": "2019-05-24",
                "status": "new",
                "parent_id": 29,
                "id": 34,
                "assignee": "Bartłomiej Nowak"
            },
            {
                "name": "Algorytmy sortujące",
                "start_time": "2019-05-01",
                "end_time": "2019-05-06",
                "status": "pending",
                "parent_id": null,
                "id": 10,
                "assignee": "Jan Kowalski"
            }
        ];


        for (i = 0; i < data.length; i++) {
            if (data[i].assignee === "Jan Kowalski") {
                data[i].parent_id = 10
            }
            if (data[i].parent_id !== Number) {
                data[i].parent_id = parseInt(data[i].parent_id)
            }
        }
        data.sort(function (a, b) {

            return a.end_time.localeCompare(b.end_time);
            return a.parent_id.localeCompare(b.parent_id);
            return a.id.localeCompare(b.id);
            return a.start_time.localeCompare(b.start_time);


        });



        for (i = 0; i < data.length; i++) {
            var y = Date.parse(data[i].end_time)
            y = y / 1000;
            y = y / 3600;
            y = y / 24;
            var x = Date.parse(data[i].start_time)
            x = x / 1000;
            x = x / 3600;
            x = x / 24;
            var DaySum=new Array(data.length); ;
            DaySum[i] = y - x;

            DaySum[i] = DaySum[i] + 1;

            var StartDay = new Array(data.length); 
            StartDay[i] = Date.parse(data[i].start_time) - Date.parse(data[0].start_time);
            StartDay[i] = StartDay[i]/86400000+1;

            document.write("Nazwa pracownika: " + data[i].assignee + "<br>" + "Wykonane zadanie: " + data[i].name +
                "<br>" + "Czas pracy (dni): " + DaySum[i] +"<br> Dzien od rozpoczęcia: "+StartDay[i]+ "<br>" + "ID_Rodzica: " + data[i].parent_id + "<br>" +
                "ID_Dziecka: " + data[i].id +
                "<br><br>");

        }
    </script>
</head>

<body>


</body>

</html>
